# Docker Compose for QA dataset generation
# Usage:
#   docker-compose -f docker-compose.qa-gen.yml up --build
#
# Resume if interrupted:
#   docker-compose -f docker-compose.qa-gen.yml run qa-generator --resume

services:
  qa-generator:
    build:
      context: .
      dockerfile: docker/Dockerfile.qa_gen
    environment:
      - API_KEY=${API_KEY}
      - OPENAI_BASE_URL=${OPENAI_BASE_URL:-http://ddns.namuori.net:8317/v1}
    volumes:
      - ./output:/app/output
    command: [
      "--input", "/app/output/wasabi_en_ko_parallel.jsonl",
      "--output", "/app/output/wasabi_qa_dataset.jsonl",
      "--num-questions", "220",
      "--model", "gemini-2.5-flash",
      "--delay", "0.3"
    ]
    restart: "no"
